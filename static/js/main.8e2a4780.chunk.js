(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{103:function(e,a,t){},106:function(e,a,t){},107:function(e,a,t){},108:function(e,a,t){},109:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(28),c=t.n(s),o=(t(86),t(34)),l=t(29),u=t(74),i=t(73),m=t(11),d="SEND_MESSAGE",p="SEND_MESSAGE_SUCCESS",E="SEND_MESSAGE_FAILED",f="FETCH_USER",h="FETCH_USER_SUCCESS",b="FETCH_USER_FAILED",g="CHAT_STATUS",v="CHAT_STATUS_SUCCESS",O="CHAT_STATUS_FAILED",j="FETCH_ROOM",y="FETCH_ROOM_SUCCESS",_="FETCH_ROOM_FAILED",S="AUTHENTICATION",N="AUTHENTICATION_SUCCESS",w="AUTHENTICATION_FAILED",x=function(e,a){var t=e;switch(a.type){case p:t=Object(m.a)(Object(m.a)({},e),{},{messages:a.payload.messages});break;case E:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;case v:t=Object(m.a)(Object(m.a)({},e),{},{status:a.payload.status});break;case O:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;case y:t=Object(m.a)(Object(m.a)({},e),{},{rooms:Object(i.a)(a.payload.rooms)});break;case _:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;case N:t=Object(m.a)(Object(m.a)({},e),{},{items:a.payload.data.user,isLogin:a.payload.data.isLogin});break;case w:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;default:t=e}return t},C={users:{rooms:[],items:{},messages:"",isLogin:!1,hasError:!1,errorMessages:"",status:!1}},k=t(59),A=t(10),T=t.n(A),U=t(14),M=T.a.mark(G),I=T.a.mark(J),D=T.a.mark(P),L=T.a.mark(W),H=T.a.mark(q),R=T.a.mark(z),F=T.a.mark(V),B=T.a.mark(Y);function G(e){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(U.c)({type:p,payload:{messages:e.payload.messages}});case 3:return a.next=5,Object(U.c)({type:h,payload:{isLogin:e.payload.login}});case 5:a.next=13;break;case 7:return a.prev=7,a.t0=a.catch(0),a.next=11,Object(U.c)({type:E,payload:{messages:a.t0.message}});case 11:return a.next=13,Object(U.c)({type:b,payload:{messages:a.t0.message}});case 13:case"end":return a.stop()}}),M,null,[[0,7]])}function J(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(d,G);case 2:case"end":return e.stop()}}),I)}function P(e){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(U.c)({type:v,payload:{status:e.payload.status}});case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a.catch(0),a.next=9,Object(U.c)({type:O,payload:{messages:a.t0.message}});case 9:case"end":return a.stop()}}),D,null,[[0,5]])}function W(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(g,P);case 2:case"end":return e.stop()}}),L)}function q(e){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(U.c)({type:y,payload:{rooms:e.payload}});case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a.catch(0),a.next=9,Object(U.c)({type:_,payload:{messages:a.t0.message}});case 9:case"end":return a.stop()}}),H,null,[[0,5]])}function z(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(j,q);case 2:case"end":return e.stop()}}),R)}function V(e){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(U.b)((function(){return e.payload.user.uid}));case 3:return a=t.sent,localStorage.setItem("UID",JSON.stringify(a)),t.next=7,Object(U.c)({type:N,payload:{data:Object(m.a)({},e.payload)}});case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(U.c)({type:w,payload:{messages:t.t0.message}});case 13:case"end":return t.stop()}}),F,null,[[0,9]])}function Y(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(S,V);case 2:case"end":return e.stop()}}),B)}var K=T.a.mark(Q);function Q(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)([J(),W(),z(),Y()]);case 2:case"end":return e.stop()}}),K)}var X=Object(k.composeWithDevTools)({trace:!0,traceLimit:25}),Z=Object(u.a)(),$=Object(l.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;return{users:x(e.users,a)}}),X(Object(l.applyMiddleware)(Z)));Z.run(Q);var ee=$,ae=t(19),te=(t(92),t(54),t(75)),ne=t(8),re=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Nothing Found..."))},se=t(33),ce=t(123),oe=t(121),le=t(47),ue=t.n(le),ie=t(48),me=t.n(ie),de=t(63),pe=t.n(de),Ee=t(64),fe=t.n(Ee),he=t(65),be=t.n(he),ge=t(39),ve=t.n(ge),Oe=(t(103),ve.a.initializeApp({apiKey:"AIzaSyCNcjbhJBBoqDssf7xNGMQmqSPB2ml0HPw",authDomain:"whatsapp-d833a.firebaseapp.com",databaseURL:"https://whatsapp-d833a.firebaseio.com",projectId:"whatsapp-d833a",storageBucket:"whatsapp-d833a.appspot.com",messagingSenderId:"180474218116",appId:"1:180474218116:web:53b7edd7644ab9871224d1"})),je=Oe.firestore(),ye=Oe.auth(),_e=new ve.a.auth.GoogleAuthProvider,Se=je,Ne=Object(ae.b)((function(e){return{user:e.users.items}}),(function(e){return{sendMessage:function(a){e({type:d,payload:a})}}}))((function(e){var a,t,s=e.sendMessage,c=e.user,o=Object(ne.f)().roomId,l=Object(n.useState)(""),u=Object(se.a)(l,2),i=u[0],m=u[1],d=Object(n.useState)(""),p=Object(se.a)(d,2),E=p[0],f=p[1],h=Object(n.useState)([]),b=Object(se.a)(h,2),g=b[0],v=b[1];return Object(n.useEffect)((function(){o&&Se.collection("rooms").doc(o).onSnapshot((function(e){return f(e.data().name)})),Se.collection("rooms").doc(o).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return v(e.docs.map((function(e){return e.data()})))}))}),[o]),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat_header"},r.a.createElement(ce.a,null),r.a.createElement("div",{className:"chat_header_info"},r.a.createElement("h3",null,E),r.a.createElement("p",null,"last seen ",new Date(null===(a=g[g.length-1])||void 0===a||null===(t=a.timestamp)||void 0===t?void 0:t.toDate()).toLocaleTimeString())),r.a.createElement("div",{className:"chat_header_right"},r.a.createElement(oe.a,null,r.a.createElement(ue.a,null)),r.a.createElement(oe.a,null,r.a.createElement(pe.a,null)),r.a.createElement(oe.a,null,r.a.createElement(me.a,null)))),r.a.createElement("div",{className:"chat_body"},null===g||void 0===g?void 0:g.map((function(e){var a;return r.a.createElement("p",{className:"chat_body_msg ".concat(e.name===c.displayName&&"msg_reciever")},r.a.createElement("span",{className:"chat_body_name"},e.name),r.a.createElement("span",null,e.message),r.a.createElement("span",{className:"chat_body_timestamp"},new Date(null===(a=e.timestamp)||void 0===a?void 0:a.toDate()).toLocaleTimeString()))}))),r.a.createElement("div",{className:"chat_footer"},r.a.createElement(fe.a,null),r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:i,placeholder:"type something...",onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),s({messages:i}),m(""),Se.collection("rooms").doc(o).collection("messages").add({message:i,name:c.displayName,timestamp:ve.a.firestore.FieldValue.serverTimestamp()})}},"send")),r.a.createElement(be.a,null)))})),we=t(67),xe=t.n(we),Ce=t(68),ke=t.n(Ce),Ae=(t(106),t(66)),Te=t.n(Ae),Ue=(t(107),Object(ae.b)((function(e){return{userState:e.users.items,messages:e.users.messages,errorMessages:e.users.errorMessages,status:e.users.status}}),(function(e){return{fetchUser:function(a){e({type:g,payload:a})}}}))((function(e){var a,t=e.addNewChat,s=e.name,c=e.id,l=e.fetchUser,u=Object(n.useState)(""),i=Object(se.a)(u,2),m=i[0],d=i[1],p=Object(n.useState)([]),E=Object(se.a)(p,2),f=E[0],h=E[1];Object(n.useEffect)((function(){c&&Se.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(n.useEffect)((function(){d(Math.floor(9*Math.random()+1))}),[m]);return t?r.a.createElement("div",{className:"sidebar__chat",onClick:function(){var e=prompt("Enter Your Name");e&&Se.collection("rooms").add({name:e})}},r.a.createElement("div",{className:"sidebar__chat__add"},r.a.createElement(Te.a,null),r.a.createElement("h2",null,"Add New Chat"))):r.a.createElement(o.b,{to:"/room/".concat(c)},r.a.createElement("div",{className:"sidebar__chat",onClick:function(){return l({status:!0})}},r.a.createElement(ce.a,{src:"https://avatars.dicebear.com/api/human/".concat(m,".","svg")}),r.a.createElement("div",{className:"sidebar__chat_info"},r.a.createElement("h2",null,s),r.a.createElement("p",null,null===(a=f[0])||void 0===a?void 0:a.message))))}))),Me=Object(ae.b)((function(e){return{rooms:e.users.rooms,items:e.users.items}}),(function(e){return{fetchRoom:function(a){e({type:j,payload:a})}}}))((function(e){var a=e.fetchRoom,t=e.rooms,s=e.items;return Object(n.useEffect)((function(){Se.collection("rooms").onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__header"},r.a.createElement(ce.a,{src:s.photoURL}),r.a.createElement("div",{className:"sidebar_headerRight"},r.a.createElement("div",{className:"sidebar_headerRight_hideOnMobile"},r.a.createElement(oe.a,null,r.a.createElement(xe.a,null)),r.a.createElement(oe.a,null,r.a.createElement(ke.a,null))),r.a.createElement(oe.a,null,r.a.createElement(me.a,null)))),r.a.createElement("div",{className:"sidebar__search"},r.a.createElement("div",{className:"sidebar__searchContainer"},r.a.createElement(ue.a,null),r.a.createElement("input",{type:"text",placeholder:"search or start new chat"}))),r.a.createElement("div",{className:"sidebar__chats"},r.a.createElement(Ue,{addNewChat:!0}),t.map((function(e){return r.a.createElement(Ue,{key:e.id,id:e.id,name:e.data.name})}))))})),Ie=[{path:"/",exact:!0,component:Object(ae.b)((function(e){return{userState:e.users.items,messages:e.users.messages,errorMessages:e.users.errorMessages,status:e.users.status}}),(function(e){return{fetchUser:function(a){e({type:f,payload:a})}}}))((function(e){var a=e.status;return r.a.createElement("div",null,a?r.a.createElement(Ne,null):r.a.createElement("h1",null,"NO CHAT FOUND"))}))},{path:"/room/:roomId",exact:!0,component:Ne},{component:re}],De=t(69),Le=t(70),He=t(76),Re=t(72),Fe=function(e){Object(He.a)(t,e);var a=Object(Re.a)(t);function t(e){var n;return Object(De.a)(this,t),(n=a.call(this,e)).state={hasError:!1},n}return Object(Le.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"YOU HAVE AN ERROR"):this.props.children}}]),t}(n.Component),Be=r.a.createElement("div",{className:"home"},r.a.createElement(Fe,null,r.a.createElement(Me,null),r.a.createElement(ne.c,null,Ie.map((function(e,a){var t=e.component,n=e.path,s=Object(te.a)(e,["component","path"]);return r.a.createElement(ne.a,Object.assign({key:a},s,{path:n,render:function(e){return r.a.createElement(t,e)}}))}))))),Ge=t(122),Je=t(71),Pe=t.n(Je),We=(t(108),Object(ae.b)((function(e){return{userState:e.users.items,isUserLoggedIn:e.users.login}}),(function(e){return{setUser:function(a){e({type:S,payload:a})}}}))((function(e){var a=e.setUser;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login_container"},r.a.createElement("img",{src:Pe.a,alt:"logo"}),r.a.createElement("div",{className:"login_text"},r.a.createElement("h1",null,"WhatsApp")),r.a.createElement(Ge.a,{onClick:function(){ye.signInWithPopup(_e).then((function(e){a({user:e.user,isLogin:!0})})).catch((function(e){return console.log(e.message)}))}},"Login with Google")))}))),qe=Object(ae.b)((function(e){return{user:e.users.items}}))((function(e){var a=e.user;return r.a.createElement("div",{className:"app"},a.uid?Be:r.a.createElement(We,null))}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(ae.a,{store:ee},r.a.createElement(qe,null))),","),document.getElementById("root"))},54:function(e,a,t){},71:function(e,a,t){e.exports=t.p+"static/media/WhatsApp.0e878a0f.svg"},81:function(e,a,t){e.exports=t(109)},86:function(e,a,t){},92:function(e,a,t){}},[[81,1,2]]]);
//# sourceMappingURL=main.8e2a4780.chunk.js.map