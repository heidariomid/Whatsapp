(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{102:function(e,a,t){},103:function(e,a,t){},104:function(e,a,t){},105:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(28),c=t.n(s),o=(t(82),t(34)),l=t(29),u=t(71),i=t(70),m=t(11),d="SEND_MESSAGE",p="SEND_MESSAGE_SUCCESS",f="SEND_MESSAGE_FAILED",E="FETCH_USER",b="FETCH_USER_SUCCESS",h="FETCH_USER_FAILED",g="CHAT_STATUS",v="CHAT_STATUS_SUCCESS",O="CHAT_STATUS_FAILED",y="FETCH_ROOM",j="FETCH_ROOM_SUCCESS",_="FETCH_ROOM_FAILED",S="AUTHENTICATION",N="AUTHENTICATION_SUCCESS",w="AUTHENTICATION_FAILED",x=function(e,a){var t=e;switch(a.type){case p:t=Object(m.a)(Object(m.a)({},e),{},{messages:a.payload.messages});break;case f:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;case v:t=Object(m.a)(Object(m.a)({},e),{},{status:a.payload.status});break;case O:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;case j:t=Object(m.a)(Object(m.a)({},e),{},{rooms:Object(i.a)(a.payload.rooms)});break;case _:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;case N:t=Object(m.a)(Object(m.a)({},e),{},{items:a.payload.data.user,isLogin:a.payload.data.isLogin});break;case w:t=Object(m.a)(Object(m.a)({},e),{},{hasError:!0,errorMessages:a.payload.messages});break;default:t=e}return t},C={users:{rooms:[],items:{},messages:"",isLogin:!1,hasError:!1,errorMessages:"",status:!1}},k=t(59),T=t(10),A=t.n(T),U=t(14),M=A.a.mark(G),I=A.a.mark(J),D=A.a.mark(P),L=A.a.mark(W),F=A.a.mark(q),H=A.a.mark(z),R=A.a.mark(K),B=A.a.mark(Q);function G(e){return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(U.c)({type:p,payload:{messages:e.payload.messages}});case 3:return a.next=5,Object(U.c)({type:b,payload:{isLogin:e.payload.login}});case 5:a.next=13;break;case 7:return a.prev=7,a.t0=a.catch(0),a.next=11,Object(U.c)({type:f,payload:{messages:a.t0.message}});case 11:return a.next=13,Object(U.c)({type:h,payload:{messages:a.t0.message}});case 13:case"end":return a.stop()}}),M,null,[[0,7]])}function J(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(d,G);case 2:case"end":return e.stop()}}),I)}function P(e){return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(U.c)({type:v,payload:{status:e.payload.status}});case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a.catch(0),a.next=9,Object(U.c)({type:O,payload:{messages:a.t0.message}});case 9:case"end":return a.stop()}}),D,null,[[0,5]])}function W(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(g,P);case 2:case"end":return e.stop()}}),L)}function q(e){return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(U.c)({type:j,payload:{rooms:e.payload}});case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a.catch(0),a.next=9,Object(U.c)({type:_,payload:{messages:a.t0.message}});case 9:case"end":return a.stop()}}),F,null,[[0,5]])}function z(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(y,q);case 2:case"end":return e.stop()}}),H)}function K(e){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.payload.user),t.prev=1,t.next=4,Object(U.b)((function(){return e.payload.user.uid}));case 4:return a=t.sent,localStorage.setItem("UID",JSON.stringify(a)),t.next=8,Object(U.c)({type:N,payload:{data:Object(m.a)({},e.payload)}});case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,Object(U.c)({type:w,payload:{messages:t.t0.message}});case 14:case"end":return t.stop()}}),R,null,[[1,10]])}function Q(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(S,K);case 2:case"end":return e.stop()}}),B)}var V=A.a.mark(Y);function Y(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)([J(),W(),z(),Q()]);case 2:case"end":return e.stop()}}),V)}var X=Object(k.composeWithDevTools)({trace:!0,traceLimit:25}),Z=Object(u.a)(),$=Object(l.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;return{users:x(e.users,a)}}),X(Object(l.applyMiddleware)(Z)));Z.run(Y);var ee=$,ae=t(19),te=(t(88),t(54),t(72)),ne=t(8),re=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Nothing Found..."))},se=t(33),ce=t(119),oe=t(117),le=t(47),ue=t.n(le),ie=t(48),me=t.n(ie),de=t(63),pe=t.n(de),fe=t(64),Ee=t.n(fe),be=t(65),he=t.n(be),ge=t(39),ve=t.n(ge),Oe=(t(99),ve.a.initializeApp({apiKey:"AIzaSyCNcjbhJBBoqDssf7xNGMQmqSPB2ml0HPw",authDomain:"whatsapp-d833a.firebaseapp.com",databaseURL:"https://whatsapp-d833a.firebaseio.com",projectId:"whatsapp-d833a",storageBucket:"whatsapp-d833a.appspot.com",messagingSenderId:"180474218116",appId:"1:180474218116:web:53b7edd7644ab9871224d1"})),ye=Oe.firestore(),je=Oe.auth(),_e=new ve.a.auth.GoogleAuthProvider,Se=ye,Ne=Object(ae.b)((function(e){return{user:e.users.items}}),(function(e){return{sendMessage:function(a){e({type:d,payload:a})}}}))((function(e){var a,t,s=e.sendMessage,c=e.user,o=Object(ne.f)().roomId,l=Object(n.useState)(""),u=Object(se.a)(l,2),i=u[0],m=u[1],d=Object(n.useState)(""),p=Object(se.a)(d,2),f=p[0],E=p[1],b=Object(n.useState)([]),h=Object(se.a)(b,2),g=h[0],v=h[1];return Object(n.useEffect)((function(){o&&Se.collection("rooms").doc(o).onSnapshot((function(e){return E(e.data().name)})),Se.collection("rooms").doc(o).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return v(e.docs.map((function(e){return e.data()})))}))}),[o]),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat_header"},r.a.createElement(ce.a,null),r.a.createElement("div",{className:"chat_header_info"},r.a.createElement("h3",null,f),r.a.createElement("p",null,"last seen ",new Date(null===(a=g[g.length-1])||void 0===a||null===(t=a.timestamp)||void 0===t?void 0:t.toDate()).toLocaleTimeString())),r.a.createElement("div",{className:"chat_header_right"},r.a.createElement(oe.a,null,r.a.createElement(ue.a,null)),r.a.createElement(oe.a,null,r.a.createElement(pe.a,null)),r.a.createElement(oe.a,null,r.a.createElement(me.a,null)))),r.a.createElement("div",{className:"chat_body"},g.map((function(e){var a;return r.a.createElement("p",{className:"chat_body_msg ".concat(e.name===c.displayName&&"msg_reciever")},r.a.createElement("span",{className:"chat_body_name"},e.name),r.a.createElement("span",null,e.message),r.a.createElement("span",{className:"chat_body_timestamp"},new Date(null===(a=e.timestamp)||void 0===a?void 0:a.toDate()).toLocaleTimeString()))}))),r.a.createElement("div",{className:"chat_footer"},r.a.createElement(Ee.a,null),r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:i,placeholder:"type something...",onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),s({messages:i}),m(""),Se.collection("rooms").doc(o).collection("messages").add({message:i,name:c.displayName,timestamp:ve.a.firestore.FieldValue.serverTimestamp()})}},"send")),r.a.createElement(he.a,null)))})),we=t(67),xe=t.n(we),Ce=t(68),ke=t.n(Ce),Te=(t(102),t(66)),Ae=t.n(Te),Ue=(t(103),Object(ae.b)((function(e){return{userState:e.users.items,messages:e.users.messages,errorMessages:e.users.errorMessages,status:e.users.status}}),(function(e){return{fetchUser:function(a){e({type:g,payload:a})}}}))((function(e){var a,t=e.addNewChat,s=e.name,c=e.id,l=e.fetchUser,u=Object(n.useState)(""),i=Object(se.a)(u,2),m=i[0],d=i[1],p=Object(n.useState)([]),f=Object(se.a)(p,2),E=f[0],b=f[1];Object(n.useEffect)((function(){c&&Se.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return b(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(n.useEffect)((function(){d(Math.floor(9*Math.random()+1))}),[m]);return t?r.a.createElement("div",{className:"sidebar__chat",onClick:function(){var e=prompt("Enter Your Name");e&&Se.collection("rooms").add({name:e})}},r.a.createElement("div",{className:"sidebar__chat__add"},r.a.createElement(Ae.a,null),r.a.createElement("h2",null,"Add New Chat"))):r.a.createElement(o.b,{to:"/room/".concat(c)},r.a.createElement("div",{className:"sidebar__chat",onClick:function(){return l({status:!0})}},r.a.createElement(ce.a,{src:"https://avatars.dicebear.com/api/human/".concat(m,".","svg")}),r.a.createElement("div",{className:"sidebar__chat_info"},r.a.createElement("h2",null,s),r.a.createElement("p",null,null===(a=E[0])||void 0===a?void 0:a.message))))}))),Me=Object(ae.b)((function(e){return{rooms:e.users.rooms,items:e.users.items}}),(function(e){return{fetchRoom:function(a){e({type:y,payload:a})}}}))((function(e){var a=e.fetchRoom,t=e.rooms,s=e.items;return Object(n.useEffect)((function(){Se.collection("rooms").onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__header"},r.a.createElement(ce.a,{src:s.photoURL}),r.a.createElement("div",{className:"sidebar_headerRight"},r.a.createElement("div",{className:"sidebar_headerRight_hideOnMobile"},r.a.createElement(oe.a,null,r.a.createElement(xe.a,null)),r.a.createElement(oe.a,null,r.a.createElement(ke.a,null))),r.a.createElement(oe.a,null,r.a.createElement(me.a,null)))),r.a.createElement("div",{className:"sidebar__search"},r.a.createElement("div",{className:"sidebar__searchContainer"},r.a.createElement(ue.a,null),r.a.createElement("input",{type:"text",placeholder:"search or start new chat"}))),r.a.createElement("div",{className:"sidebar__chats"},r.a.createElement(Ue,{addNewChat:!0}),t.map((function(e){return r.a.createElement(Ue,{key:e.id,id:e.id,name:e.data.name})}))))})),Ie=[{path:"/",exact:!0,component:Object(ae.b)((function(e){return{userState:e.users.items,messages:e.users.messages,errorMessages:e.users.errorMessages,status:e.users.status}}),(function(e){return{fetchUser:function(a){e({type:E,payload:a})}}}))((function(e){var a=e.status;return r.a.createElement("div",null,a?r.a.createElement(Ne,null):r.a.createElement("h1",null,"NO CHAT FOUND"))}))},{path:"/room/:roomId",exact:!0,component:Ne},{component:re}],De=r.a.createElement("div",{className:"home"},r.a.createElement(Me,null),r.a.createElement(ne.c,null,Ie.map((function(e,a){var t=e.component,n=e.path,s=Object(te.a)(e,["component","path"]);return r.a.createElement(ne.a,Object.assign({key:a},s,{path:n,render:function(e){return r.a.createElement(t,e)}}))})))),Le=t(118),Fe=t(69),He=t.n(Fe),Re=(t(104),Object(ae.b)((function(e){return{userState:e.users.items,isUserLoggedIn:e.users.login}}),(function(e){return{setUser:function(a){e({type:S,payload:a})}}}))((function(e){var a=e.setUser;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login_container"},r.a.createElement("img",{src:He.a,alt:"logo"}),r.a.createElement("div",{className:"login_text"},r.a.createElement("h1",null,"WhatsApp")),r.a.createElement(Le.a,{onClick:function(){je.signInWithPopup(_e).then((function(e){a({user:e.user,isLogin:!0})})).catch((function(e){return console.log(e.message)}))}},"Login with Google")))}))),Be=Object(ae.b)((function(e){return{user:e.users.items}}),(function(e){return{fetchUser:function(a){e({type:E,payload:a})}}}))((function(e){var a=e.fetchUser,t=e.user;return Object(n.useEffect)((function(){a({messages:"Redux is Connected"}),console.log(t)}),[a]),r.a.createElement("div",{className:"app"},t.uid?De:r.a.createElement(Re,null))}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(ae.a,{store:ee},r.a.createElement(Be,null))),","),document.getElementById("root"))},54:function(e,a,t){},69:function(e,a,t){e.exports=t.p+"static/media/WhatsApp.0e878a0f.svg"},77:function(e,a,t){e.exports=t(105)},82:function(e,a,t){},88:function(e,a,t){},99:function(e,a,t){}},[[77,1,2]]]);
//# sourceMappingURL=main.05a7c6e1.chunk.js.map